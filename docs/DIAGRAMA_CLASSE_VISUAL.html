<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagrama de Classes - Sistema Finanza</title>
    <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        .diagram-container {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }
        .legend {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .legend h3 {
            color: #34495e;
            margin-top: 0;
        }
        .legend-item {
            display: inline-block;
            margin: 5px 10px;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
        }
        .domain { background: #e3f2fd; border: 2px solid #1976d2; }
        .service { background: #e8f5e8; border: 2px solid #2e7d32; }
        .dao { background: #fff8e1; border: 2px solid #f9a825; }
        .sync { background: #f3e5f5; border: 2px solid #7b1fa2; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèóÔ∏è Diagrama de Classes - Sistema Finanza</h1>
        <p><strong>Arquitetura Orientada a Objetos - Mobile (Android) + Desktop (Java)</strong></p>
        
        <div class="diagram-container">
            <div class="mermaid">
classDiagram
    %% Classes Principais do Dom√≠nio
    class Usuario {
        -String uuid
        -String nome
        -String email
        -String senhaHash
        -Date dataCriacao
        -Date ultimoLogin
        -boolean ativo
        -String configuracoes
        +Usuario()
        +String getUuid()
        +void setUuid(String uuid)
        +String getNome()
        +void setNome(String nome)
        +String getEmail()
        +void setEmail(String email)
        +boolean validarSenha(String senha)
        +void criptografarSenha(String senha)
        +boolean isAtivo()
        +void ativar()
        +void desativar()
        +Date getUltimoLogin()
        +void atualizarUltimoLogin()
        +String toString()
        +boolean equals(Object obj)
        +int hashCode()
    }
    
    class Conta {
        -String uuid
        -String nome
        -String tipo
        -BigDecimal saldo
        -String banco
        -String agencia
        -String numero
        -boolean ativa
        -Date dataCriacao
        -String uuidUsuario
        +Conta()
        +Conta(String nome, String tipo, String uuidUsuario)
        +String getUuid()
        +void setUuid(String uuid)
        +String getNome()
        +void setNome(String nome)
        +String getTipo()
        +void setTipo(String tipo)
        +BigDecimal getSaldo()
        +void setSaldo(BigDecimal saldo)
        +void adicionarValor(BigDecimal valor)
        +void subtrairValor(BigDecimal valor)
        +boolean isAtiva()
        +void ativar()
        +void desativar()
        +String getUuidUsuario()
        +void setUuidUsuario(String uuidUsuario)
        +String toString()
        +boolean equals(Object obj)
        +int hashCode()
    }
    
    class Categoria {
        -String uuid
        -String nome
        -String tipo
        -String cor
        -String icone
        -boolean ativa
        -Date dataCriacao
        -String uuidUsuario
        +Categoria()
        +Categoria(String nome, String tipo, String uuidUsuario)
        +String getUuid()
        +void setUuid(String uuid)
        +String getNome()
        +void setNome(String nome)
        +String getTipo()
        +void setTipo(String tipo)
        +String getCor()
        +void setCor(String cor)
        +String getIcone()
        +void setIcone(String icone)
        +boolean isAtiva()
        +void ativar()
        +void desativar()
        +String getUuidUsuario()
        +void setUuidUsuario(String uuidUsuario)
        +String toString()
        +boolean equals(Object obj)
        +int hashCode()
    }
    
    class Transacao {
        -String uuid
        -BigDecimal valor
        -String descricao
        -Date data
        -String tipo
        -String status
        -String observacoes
        -Date dataModificacao
        -String uuidConta
        -String uuidCategoria
        -String uuidUsuario
        +Transacao()
        +Transacao(BigDecimal valor, String tipo, String uuidConta, String uuidCategoria, String uuidUsuario)
        +String getUuid()
        +void setUuid(String uuid)
        +BigDecimal getValor()
        +void setValor(BigDecimal valor)
        +String getDescricao()
        +void setDescricao(String descricao)
        +Date getData()
        +void setData(Date data)
        +String getTipo()
        +void setTipo(String tipo)
        +String getStatus()
        +void setStatus(String status)
        +void confirmar()
        +void cancelar()
        +void estornar()
        +String getUuidConta()
        +void setUuidConta(String uuidConta)
        +String getUuidCategoria()
        +void setUuidCategoria(String uuidCategoria)
        +String getUuidUsuario()
        +void setUuidUsuario(String uuidUsuario)
        +boolean isReceita()
        +boolean isDespesa()
        +String toString()
        +boolean equals(Object obj)
        +int hashCode()
    }
    
    %% Classes de Sincroniza√ß√£o
    class SyncData {
        -String uuid
        -String tipoOperacao
        -String tabelaAfetada
        -String dadosJSON
        -Date timestamp
        -String status
        -String uuidDispositivo
        -int versao
        +SyncData()
        +SyncData(String operacao, String tabela, String dados)
        +String getUuid()
        +void setUuid(String uuid)
        +String getTipoOperacao()
        +void setTipoOperacao(String operacao)
        +String getTabelaAfetada()
        +void setTabelaAfetada(String tabela)
        +String getDadosJSON()
        +void setDadosJSON(String dados)
        +Date getTimestamp()
        +void setTimestamp(Date timestamp)
        +String getStatus()
        +void setStatus(String status)
        +void marcarComoProcessado()
        +void marcarComoErro()
        +boolean isPendente()
        +boolean isProcessado()
        +String toString()
    }
    
    class ConflictResolution {
        -String uuid
        -String tipoConflito
        -String resolucao
        -String dadosLocal
        -String dadosRemoto
        -String dadosResultante
        -Date timestamp
        -String uuidUsuario
        +ConflictResolution()
        +String getUuid()
        +void setUuid(String uuid)
        +String getTipoConflito()
        +void setTipoConflito(String tipo)
        +String getResolucao()
        +void setResolucao(String resolucao)
        +void resolverComLocal()
        +void resolverComRemoto()
        +void resolverComMerge()
        +String toString()
    }
    
    %% Classes de Servi√ßo
    class UsuarioService {
        -UsuarioDAO usuarioDAO
        -SyncService syncService
        +UsuarioService(UsuarioDAO dao)
        +Usuario autenticar(String email, String senha)
        +Usuario criar(Usuario usuario)
        +Usuario atualizar(Usuario usuario)
        +boolean excluir(String uuid)
        +Usuario buscarPorEmail(String email)
        +Usuario buscarPorUuid(String uuid)
        +List~Usuario~ listarTodos()
        +boolean validarSenha(Usuario usuario, String senha)
        +void alterarSenha(String uuid, String novaSenha)
        +void ativarDesativar(String uuid, boolean ativo)
    }
    
    class TransacaoService {
        -TransacaoDAO transacaoDAO
        -ContaService contaService
        -SyncService syncService
        +TransacaoService(TransacaoDAO dao)
        +Transacao criar(Transacao transacao)
        +Transacao atualizar(Transacao transacao)
        +boolean excluir(String uuid)
        +Transacao buscarPorUuid(String uuid)
        +List~Transacao~ listarPorConta(String uuidConta)
        +List~Transacao~ listarPorCategoria(String uuidCategoria)
        +List~Transacao~ listarPorPeriodo(Date inicio, Date fim)
        +BigDecimal calcularSaldoPorConta(String uuidConta)
        +BigDecimal calcularTotalPorCategoria(String uuidCategoria)
        +void confirmarTransacao(String uuid)
        +void cancelarTransacao(String uuid)
    }
    
    class SyncService {
        -SyncDataDAO syncDAO
        -ConflictResolutionDAO conflictDAO
        -NetworkManager networkManager
        +SyncService()
        +void sincronizarTudo()
        +void sincronizarTabela(String tabela)
        +void adicionarOperacao(String operacao, String tabela, String dados)
        +List~SyncData~ obterPendentes()
        +void processarFila()
        +ConflictResolution resolverConflito(SyncData local, SyncData remoto)
        +boolean verificarConectividade()
        +void configurarSincronizacaoAutomatica(boolean ativo)
    }
    
    %% Classes DAO
    class UsuarioDAO {
        +Usuario criar(Usuario usuario)
        +Usuario atualizar(Usuario usuario)
        +boolean excluir(String uuid)
        +Usuario buscarPorUuid(String uuid)
        +Usuario buscarPorEmail(String email)
        +List~Usuario~ listarTodos()
        +boolean existeEmail(String email)
    }
    
    class ContaDAO {
        +Conta criar(Conta conta)
        +Conta atualizar(Conta conta)
        +boolean excluir(String uuid)
        +Conta buscarPorUuid(String uuid)
        +List~Conta~ listarPorUsuario(String uuidUsuario)
        +List~Conta~ listarAtivas(String uuidUsuario)
    }
    
    class TransacaoDAO {
        +Transacao criar(Transacao transacao)
        +Transacao atualizar(Transacao transacao)
        +boolean excluir(String uuid)
        +Transacao buscarPorUuid(String uuid)
        +List~Transacao~ listarPorConta(String uuidConta)
        +List~Transacao~ listarPorPeriodo(Date inicio, Date fim)
        +BigDecimal calcularSaldoConta(String uuidConta)
    }
    
    class SyncDataDAO {
        +SyncData criar(SyncData syncData)
        +SyncData atualizar(SyncData syncData)
        +boolean excluir(String uuid)
        +List~SyncData~ listarPendentes()
        +List~SyncData~ listarPorTabela(String tabela)
        +void marcarComoProcessado(String uuid)
    }
    
    %% Relacionamentos
    Usuario ||--o{ Conta : "possui"
    Usuario ||--o{ Categoria : "possui"
    Usuario ||--o{ Transacao : "realiza"
    Conta ||--o{ Transacao : "registra"
    Categoria ||--o{ Transacao : "classifica"
    
    %% Relacionamentos de Servi√ßos
    UsuarioService --> UsuarioDAO : "usa"
    TransacaoService --> TransacaoDAO : "usa"
    TransacaoService --> ContaService : "usa"
    SyncService --> SyncDataDAO : "usa"
    SyncService --> ConflictResolutionDAO : "usa"
    
    %% Relacionamentos de Sincroniza√ß√£o
    SyncData --> Usuario : "sincroniza"
    SyncData --> Conta : "sincroniza"
    SyncData --> Categoria : "sincroniza"
    SyncData --> Transacao : "sincroniza"
    ConflictResolution --> SyncData : "resolve"
    
    %% Styling
    classDef domain fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef service fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef dao fill:#fff8e1,stroke:#f9a825,stroke-width:2px,color:#000
    classDef sync fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    
    class Usuario,Conta,Categoria,Transacao domain
    class UsuarioService,TransacaoService,SyncService service
    class UsuarioDAO,ContaDAO,TransacaoDAO,SyncDataDAO dao
    class SyncData,ConflictResolution sync
            </div>
        </div>
        
        <div class="legend">
            <h3>üé® Legenda de Cores das Classes:</h3>
            <div class="legend-item domain">üîµ Entidades de Dom√≠nio</div>
            <div class="legend-item service">üü¢ Services e Controllers</div>
            <div class="legend-item dao">üü° DAOs e Persist√™ncia</div>
            <div class="legend-item sync">üü£ Sincroniza√ß√£o</div>
        </div>
        
        <div class="legend">
            <h3>üìä Estat√≠sticas do Diagrama:</h3>
            <ul>
                <li><strong>Classes de Dom√≠nio:</strong> 4 (Usuario, Conta, Categoria, Transacao)</li>
                <li><strong>Classes de Servi√ßo:</strong> 3 (UsuarioService, TransacaoService, SyncService)</li>
                <li><strong>Classes DAO:</strong> 4 (UsuarioDAO, ContaDAO, TransacaoDAO, SyncDataDAO)</li>
                <li><strong>Classes de Sincroniza√ß√£o:</strong> 2 (SyncData, ConflictResolution)</li>
                <li><strong>Total de Relacionamentos:</strong> 15 associa√ß√µes diretas</li>
            </ul>
        </div>
        
        <div class="legend">
            <h3>üîß Padr√µes de Design Aplicados:</h3>
            <ul>
                <li><strong>Repository Pattern:</strong> Classes DAO para abstra√ß√£o da persist√™ncia</li>
                <li><strong>Service Layer:</strong> Services para l√≥gica de neg√≥cio</li>
                <li><strong>Domain Model:</strong> Entidades ricas com comportamento</li>
                <li><strong>Data Transfer Object:</strong> SyncData para transfer√™ncia de dados</li>
                <li><strong>Strategy Pattern:</strong> ConflictResolution para resolu√ß√£o de conflitos</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            },
            classDiagram: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>