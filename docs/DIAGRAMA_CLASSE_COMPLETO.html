<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagrama de Classes - Sistema Finanza</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        .diagram-visual {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            min-height: 1000px;
            overflow-x: auto;
        }
        .visual-diagram {
            font-family: 'Courier New', monospace;
            line-height: 1.4;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            white-space: pre-wrap;
            overflow-x: auto;
            font-size: 11px;
        }
        .legend {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .legend h3 {
            color: #34495e;
            margin-top: 0;
        }
        .legend-item {
            display: inline-block;
            margin: 5px 10px;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            border: 2px solid;
        }
        .domain { background: #e3f2fd; border-color: #1976d2; }
        .service { background: #e8f5e8; border-color: #2e7d32; }
        .dao { background: #fff8e1; border-color: #f9a825; }
        .sync { background: #f3e5f5; border-color: #7b1fa2; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🏗️ Diagrama de Classes - Sistema Finanza</h1>
        <p><strong>Arquitetura Orientada a Objetos - Mobile (Android) + Desktop (Java)</strong></p>
        
        <div class="diagram-visual">
            <div class="visual-diagram">
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                            SISTEMA FINANZA - DIAGRAMA DE CLASSES                                                                                    ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                              CAMADA DE DOMÍNIO (Domain Entities)                                                                                   │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────┐    ┌─────────────────────────────────┐    ┌─────────────────────────────────┐    ┌─────────────────────────────────┐
│            Usuario              │    │             Conta               │    │           Categoria             │    │           Transacao             │
├─────────────────────────────────┤    ├─────────────────────────────────┤    ├─────────────────────────────────┤    ├─────────────────────────────────┤
│ - uuid: String                  │    │ - uuid: String                  │    │ - uuid: String                  │    │ - uuid: String                  │
│ - nome: String                  │    │ - nome: String                  │    │ - nome: String                  │    │ - valor: BigDecimal             │
│ - email: String                 │    │ - tipo: String                  │    │ - tipo: String                  │    │ - descricao: String             │
│ - senhaHash: String             │    │ - saldo: BigDecimal             │    │ - cor: String                   │    │ - data: Date                    │
│ - dataCriacao: Date             │    │ - banco: String                 │    │ - icone: String                 │    │ - tipo: String                  │
│ - ultimoLogin: Date             │    │ - agencia: String               │    │ - ativa: boolean                │    │ - status: String                │
│ - ativo: boolean                │    │ - numero: String                │    │ - dataCriacao: Date             │    │ - observacoes: String           │
│ - configuracoes: String         │    │ - ativa: boolean                │    │ - uuidUsuario: String           │    │ - dataModificacao: Date         │
├─────────────────────────────────┤    │ - dataCriacao: Date             │    ├─────────────────────────────────┤    │ - uuidConta: String             │
│ + Usuario()                     │    │ - uuidUsuario: String           │    │ + Categoria()                   │    │ - uuidCategoria: String         │
│ + getUuid(): String             │    ├─────────────────────────────────┤    │ + getUuid(): String             │    │ - uuidUsuario: String           │
│ + setUuid(uuid: String): void   │    │ + Conta()                       │    │ + setUuid(uuid: String): void   │    ├─────────────────────────────────┤
│ + getNome(): String             │    │ + getUuid(): String             │    │ + getNome(): String             │    │ + Transacao()                   │
│ + setNome(nome: String): void   │    │ + setUuid(uuid: String): void   │    │ + setNome(nome: String): void   │    │ + getUuid(): String             │
│ + getEmail(): String            │    │ + getNome(): String             │    │ + getTipo(): String             │    │ + setUuid(uuid: String): void   │
│ + setEmail(email: String): void │    │ + setNome(nome: String): void   │    │ + setTipo(tipo: String): void   │    │ + getValor(): BigDecimal        │
│ + validarSenha(senha: String)   │    │ + getTipo(): String             │    │ + getCor(): String              │    │ + setValor(valor: BigDecimal)   │
│ + criptografarSenha(senha)      │    │ + setTipo(tipo: String): void   │    │ + setCor(cor: String): void     │    │ + getDescricao(): String        │
│ + isAtivo(): boolean            │    │ + getSaldo(): BigDecimal        │    │ + getIcone(): String            │    │ + setDescricao(desc: String)    │
│ + ativar(): void                │    │ + setSaldo(saldo: BigDecimal)   │    │ + setIcone(icone: String)       │    │ + getData(): Date               │
│ + desativar(): void             │    │ + adicionarValor(valor)         │    │ + isAtiva(): boolean            │    │ + setData(data: Date): void     │
│ + getUltimoLogin(): Date        │    │ + subtrairValor(valor)          │    │ + ativar(): void                │    │ + getTipo(): String             │
│ + atualizarUltimoLogin(): void  │    │ + isAtiva(): boolean            │    │ + desativar(): void             │    │ + setTipo(tipo: String): void   │
│ + toString(): String            │    │ + ativar(): void                │    │ + getUuidUsuario(): String      │    │ + getStatus(): String           │
│ + equals(obj: Object): boolean  │    │ + desativar(): void             │    │ + setUuidUsuario(uuid: String)  │    │ + setStatus(status: String)     │
│ + hashCode(): int               │    │ + getUuidUsuario(): String      │    │ + toString(): String            │    │ + confirmar(): void             │
└─────────────────────────────────┘    │ + setUuidUsuario(uuid: String)  │    │ + equals(obj: Object): boolean  │    │ + cancelar(): void              │
             │                         │ + toString(): String            │    │ + hashCode(): int               │    │ + estornar(): void              │
             │ 1                       │ + equals(obj: Object): boolean  │    └─────────────────────────────────┘    │ + isReceita(): boolean          │
             │                         │ + hashCode(): int               │                │                         │ + isDespesa(): boolean          │
             │                         └─────────────────────────────────┘                │ 1                       │ + toString(): String            │
             │                                    │ 1                                      │                         │ + equals(obj: Object): boolean  │
             │                                    │                                        │                         │ + hashCode(): int               │
             │                                    │                                        │                         └─────────────────────────────────┘
             │                                    │                                        │                                    │ *
             │                                    │                                        │                                    │
             │possui *                            │registra *                              │classifica *                       │
             ▼                                    ▼                                        ▼                                    │
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────│──────────────────────────────────────┐
│                                                    RELACIONAMENTOS PRINCIPAIS                                                   │                                      │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼──────────────────────────────────────┤
│ • Usuario (1) ◄────► (0..*) Conta      : Um usuário pode ter várias contas                                                     │                                      │
│ • Usuario (1) ◄────► (0..*) Categoria  : Um usuário pode criar várias categorias                                               │                                      │
│ • Usuario (1) ◄────► (0..*) Transacao  : Um usuário pode realizar várias transações                                            │                                      │
│ • Conta (1) ◄──────► (0..*) Transacao  : Uma conta pode ter várias transações                                                  │                                      │
│ • Categoria (1) ◄──► (0..*) Transacao  : Uma categoria pode classificar várias transações                                      │                                      │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┴──────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                           CAMADA DE SINCRONIZAÇÃO (Sync Layer)                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────┐                                ┌─────────────────────────────────┐
│           SyncData              │                                │      ConflictResolution         │
├─────────────────────────────────┤                                ├─────────────────────────────────┤
│ - uuid: String                  │                                │ - uuid: String                  │
│ - tipoOperacao: String          │                                │ - tipoConflito: String          │
│ - tabelaAfetada: String         │                                │ - resolucao: String             │
│ - dadosJSON: String             │                                │ - dadosLocal: String            │
│ - timestamp: Date               │                                │ - dadosRemoto: String           │
│ - status: String                │                                │ - dadosResultante: String       │
│ - uuidDispositivo: String       │                                │ - timestamp: Date               │
│ - versao: int                   │                                │ - uuidUsuario: String           │
├─────────────────────────────────┤                                ├─────────────────────────────────┤
│ + SyncData()                    │                                │ + ConflictResolution()          │
│ + getUuid(): String             │                                │ + getUuid(): String             │
│ + setUuid(uuid: String): void   │                                │ + setUuid(uuid: String): void   │
│ + getTipoOperacao(): String     │                                │ + getTipoConflito(): String     │
│ + setTipoOperacao(op: String)   │           resolve              │ + setTipoConflito(tipo: String) │
│ + getTabelaAfetada(): String    │ ◄──────────────────────────────│ + getResolucao(): String        │
│ + setTabelaAfetada(tab: String) │                                │ + setResolucao(res: String)     │
│ + getDadosJSON(): String        │                                │ + resolverComLocal(): void      │
│ + setDadosJSON(dados: String)   │                                │ + resolverComRemoto(): void     │
│ + getTimestamp(): Date          │                                │ + resolverComMerge(): void      │
│ + setTimestamp(time: Date)      │                                │ + toString(): String            │
│ + getStatus(): String           │                                └─────────────────────────────────┘
│ + setStatus(status: String)     │
│ + marcarComoProcessado(): void  │
│ + marcarComoErro(): void        │
│ + isPendente(): boolean         │
│ + isProcessado(): boolean       │
│ + toString(): String            │
└─────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                              CAMADA DE SERVIÇOS (Service Layer)                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────┐    ┌─────────────────────────────────┐    ┌─────────────────────────────────┐
│         UsuarioService          │    │        TransacaoService         │    │          SyncService            │
├─────────────────────────────────┤    ├─────────────────────────────────┤    ├─────────────────────────────────┤
│ - usuarioDAO: UsuarioDAO        │    │ - transacaoDAO: TransacaoDAO    │    │ - syncDAO: SyncDataDAO          │
│ - syncService: SyncService      │    │ - contaService: ContaService    │    │ - conflictDAO: ConflictResDAO   │
├─────────────────────────────────┤    │ - syncService: SyncService      │    │ - networkManager: NetworkMgr    │
│ + UsuarioService(dao: UsuDAO)   │    ├─────────────────────────────────┤    ├─────────────────────────────────┤
│ + autenticar(email, senha)      │    │ + TransacaoService(dao: TrDAO)  │    │ + SyncService()                 │
│ + criar(usuario: Usuario)       │    │ + criar(transacao: Transacao)   │    │ + sincronizarTudo(): void       │
│ + atualizar(usuario: Usuario)   │    │ + atualizar(trans: Transacao)   │    │ + sincronizarTabela(tab: Str)   │
│ + excluir(uuid: String)         │    │ + excluir(uuid: String)         │    │ + adicionarOperacao(op, tab, d) │
│ + buscarPorEmail(email: String) │    │ + buscarPorUuid(uuid: String)   │    │ + obterPendentes(): List        │
│ + buscarPorUuid(uuid: String)   │    │ + listarPorConta(uuid: String)  │    │ + processarFila(): void         │
│ + listarTodos(): List<Usuario>  │    │ + listarPorCategoria(uuid: Str) │    │ + resolverConflito(l, r): CR    │
│ + validarSenha(user, senha)     │    │ + listarPorPeriodo(ini, fim)    │    │ + verificarConectividade(): b   │
│ + alterarSenha(uuid, nova)      │    │ + calcularSaldoPorConta(uuid)   │    │ + configurarSincAuto(ativo: b)  │
│ + ativarDesativar(uuid, ativo)  │    │ + calcularTotalPorCategoria(u)  │    └─────────────────────────────────┘
└─────────────────────────────────┘    │ + confirmarTransacao(uuid: Str) │                  │
             │                         │ + cancelarTransacao(uuid: Str)  │                  │
             │ usa                     └─────────────────────────────────┘                  │
             ▼                                      │                                       │
                                                    │ usa                                   │
                                                    ▼                                       │

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                CAMADA DAO (Data Access Layer)                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────┐    ┌─────────────────────────────────┐    ┌─────────────────────────────────┐    ┌─────────────────────────────────┐
│           UsuarioDAO            │    │            ContaDAO             │    │         TransacaoDAO            │    │          SyncDataDAO            │
├─────────────────────────────────┤    ├─────────────────────────────────┤    ├─────────────────────────────────┤    ├─────────────────────────────────┤
│ + criar(usuario: Usuario)       │    │ + criar(conta: Conta)           │    │ + criar(transacao: Transacao)   │    │ + criar(syncData: SyncData)     │
│ + atualizar(usuario: Usuario)   │    │ + atualizar(conta: Conta)       │    │ + atualizar(trans: Transacao)   │    │ + atualizar(sync: SyncData)     │
│ + excluir(uuid: String)         │    │ + excluir(uuid: String)         │    │ + excluir(uuid: String)         │    │ + excluir(uuid: String)         │
│ + buscarPorUuid(uuid: String)   │    │ + buscarPorUuid(uuid: String)   │    │ + buscarPorUuid(uuid: String)   │    │ + listarPendentes(): List       │
│ + buscarPorEmail(email: String) │    │ + listarPorUsuario(uuid: Str)   │    │ + listarPorConta(uuid: String)  │    │ + listarPorTabela(tab: String)  │
│ + listarTodos(): List<Usuario>  │    │ + listarAtivas(uuid: String)    │    │ + listarPorPeriodo(ini, fim)    │    │ + marcarComoProcessado(uuid)    │
│ + existeEmail(email: String)    │    └─────────────────────────────────┘    │ + calcularSaldoConta(uuid)      │    └─────────────────────────────────┘
└─────────────────────────────────┘                                           └─────────────────────────────────┘
             ▲                                                                              ▲                                      ▲
             │                                                                              │                                      │
             │ usa                                                                          │ usa                                  │ usa
             │                                                                              │                                      │
┌────────────┴─────────────────────────────────────────────────────────────────────────────┴──────────────────────────────────────┴─────┐
│                                                    CAMADA DE PERSISTÊNCIA (Database Layer)                                             │
│                                                                                                                                         │
│  ┌─────────────────────────┐              ┌─────────────────────────┐              ┌─────────────────────────────────────────────┐  │
│  │      MySQL Server       │              │      SQLite Mobile      │              │           Connection Pool                   │  │
│  │  (Aplicação Desktop)    │              │   (Aplicação Mobile)    │              │        (Gerenciamento de Conexões)         │  │
│  └─────────────────────────┘              └─────────────────────────┘              └─────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
            </div>
        </div>
        
        <div class="legend">
            <h3>🎨 Legenda de Cores das Classes:</h3>
            <div class="legend-item domain">🔵 Entidades de Domínio</div>
            <div class="legend-item service">🟢 Services e Controllers</div>
            <div class="legend-item dao">🟡 DAOs e Persistência</div>
            <div class="legend-item sync">🟣 Sincronização</div>
        </div>
        
        <div class="legend">
            <h3>📊 Estatísticas do Diagrama:</h3>
            <ul>
                <li><strong>Classes de Domínio:</strong> 4 (Usuario, Conta, Categoria, Transacao)</li>
                <li><strong>Classes de Serviço:</strong> 3 (UsuarioService, TransacaoService, SyncService)</li>
                <li><strong>Classes DAO:</strong> 4 (UsuarioDAO, ContaDAO, TransacaoDAO, SyncDataDAO)</li>
                <li><strong>Classes de Sincronização:</strong> 2 (SyncData, ConflictResolution)</li>
                <li><strong>Total de Relacionamentos:</strong> 15 associações diretas</li>
            </ul>
        </div>
        
        <div class="legend">
            <h3>🔧 Padrões de Design Aplicados:</h3>
            <ul>
                <li><strong>Repository Pattern:</strong> Classes DAO para abstração da persistência</li>
                <li><strong>Service Layer:</strong> Services para lógica de negócio</li>
                <li><strong>Domain Model:</strong> Entidades ricas com comportamento</li>
                <li><strong>Data Transfer Object:</strong> SyncData para transferência de dados</li>
                <li><strong>Strategy Pattern:</strong> ConflictResolution para resolução de conflitos</li>
            </ul>
        </div>
    </div>
</body>
</html>